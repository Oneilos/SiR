//
// @variables
//
$color-base-timeline: $iron !default;

$spacing-timeline: rem-calc(16);

$size-bullet-timeline: 40px;
$size-arrow-timeline: 5px;
$position-top-bullet-timeline: 0;

$width-line-timeline: 4px;
$position-line-timeline: 25%;
$position-line-timeline-medium: 15%;
$gutter-timeline: $size-bullet-timeline / 2 + 20px;

$color-background-content: $white;
$border-radius-content-timeline: 3px;
$shadow-content-timeline: 0 2px 1px hsla(0,0%,0%,.075);

// We use this mixin to create a container around our breadcrumbs
@mixin timeline-container {
  position: relative;
  padding: $spacing-timeline 0;

  &:before {
    content: '';
    width: $width-line-timeline;
    height: 100%;
    position: absolute;
    top: 0;
    left: $position-line-timeline;
    margin-left: -$width-line-timeline/2;
    background: $color-base-timeline;

    @media #{$medium-up} {
      left: $position-line-timeline-medium;
    }
  }
}
@mixin timeline-step {
  max-width: 100%;
  position: relative;
  margin-bottom: $spacing-timeline;

  &:last-child {
    margin-bottom: 0;
  }
  &:before {
    content: '';
    display: block;
    position: absolute;
    top: $position-top-bullet-timeline;
    left: $position-line-timeline;
    width: $size-bullet-timeline;
    height: $size-bullet-timeline;
    margin-left: -$size-bullet-timeline / 2;
    border: solid $width-line-timeline $color-base-timeline;
    font-size: rem-calc(25);
    text-align: center;
    color: $color-base-timeline;
    border-radius: 100%;
    background: $white;

    // CC from foundation-icons
    font-family: "foundation-icons";
    font-style: normal;
    font-weight: normal;
    font-variant: normal;
    text-transform: none;
    line-height: 1.3;
    -webkit-font-smoothing: antialiased;
    text-decoration: inherit;

    @media #{$medium-up} {
      left: $position-line-timeline-medium;
    }
  }
}
@mixin timeline-info {
  width: $position-line-timeline;
  position: relative;
  padding-right: $gutter-timeline;
  text-align: right;

  .user {
    display: block;
  }
  time {
    display: block;
    font-size: rem-calc(14);
  }

  @media #{$medium-up} {
    width: $position-line-timeline-medium;
  }
}
@mixin timeline-content {
  width: 100% - $position-line-timeline;
  padding-left: $gutter-timeline;

  .inner {
    margin: 0 0 $spacing-timeline;
    padding: $spacing-timeline 0 0;
    background: $color-background-content;
    border-radius: $border-radius-content-timeline;
    box-shadow: $shadow-content-timeline;
    position: relative;

    &:before {
      @include css-triangle($size-arrow-timeline, $white, right);
      position: absolute;
      top: $size-bullet-timeline / 2 - $size-arrow-timeline;
      right: 100%;
    }
  }

  @media #{$medium-up} {
    width: 100% - $position-line-timeline-medium;
  }
}

@include exports("timeline") {
  .timeline-actions {
    margin-top: $spacing-timeline;
  }
  .timeline {
    @include timeline-container;

    .step {
      @include timeline-step;

      .info {
        @include timeline-info;
      }
      .content {
        @include timeline-content;
      }
      .actions {
        @media #{$medium-up} {
          padding-left: $spacing-timeline;
        }
      }
    }
  }
}
